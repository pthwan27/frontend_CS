# 브라우저 동작원리

## Q1.브라우저에 대해 설명하고 브라우저의 동작원리를 설명해보실 수 있나요?

브라우저의 기본적인 역할은 HTML, CSS 명세에 따라 HTML 파일을 해석해서 표시하는 것입니다.

브라우저를 구성하는 요소는 사용자 인터페이스, 브라우저 엔진(크롬, 사파리는 Webkit, 파이어폭스는 Gecko), 렌더링 엔진, 통신, UI 백엔드, 자바스크립트 해석기, 자료 저장소 등이 있습니다.

렌더링 엔진은 먼저 HTML 문서를 파싱해서 DOM 트리를 구축한다. 그리고 CSS 마크업을 파싱해서 앞서 구축한 DOM 트리와 함께 렌더링 트리를 만든다. 렌더링 트리는 화면에 보여줄 것들만 가지고 있는 트리로, 구축이 되면 순차적으로 화면에 배치한다. 부모에서 자식 순서로 배치는 진행된다. 배치가 완료되면 그리기를 시작한다.

1. 브라우저에서 도메인이름(ex. www.naver.com)을 입력

2. 브라우저가 해당 IP주소를 얻기 위해 DNS 서버의 요청을 보내 주소 획득

3. IP주소를 받은 브라우저는 해당 요청을 IP주소와 일치하는 서버로 전달
   웹사이트의 사본을 클라이언트에게 보내달라는 HTTP 요청 메시지를 서버로 전송합니다. 서버와 전송되는 모든 데이터는 TCP/IP 연결을 통해서 전송합니다.

4. 서버는 웹사이트의 파일들을 데이터 패킷이라 불리는 작은 일련의 덩어리들로 브라우저에 전송하기 시작
5. 웹 서버 또는 그 밖의 리소스는 DNS의 웹 페이지를 웹 브라우저로 반환하고, 웹 브라우저는 이 페이지를 표시
6. 웹 브라우저의 페이지 표시(중요 랜더링 경로)
   1 - HTML 마크업을 처리하고 DOM 트리를 빌드한다. ("무엇을" 그릴지 결정한다.)
   2 - CSS 마크업을 처리하고 CSSOM 트리를 빌드한다. ("어떻게" 그릴지 결정한다.)
   3 - DOM 및 CSSOM 을 결합하여 렌더링 트리를 형성한다. ("화면에 그려질 것만" 결정)
   4 - 렌더링 트리에서 layout과정을 거친다. ("어디에 위치할 지 계산)
   이때 CSS box model이 쓰이며 위치와 관련된 부분들이 계산된다.

5 - Render Tree의 개별 노드를 화면에 페인트한다.(or 래스터화)

---

![브라우저 동작 과정](../../images/CS/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98%20%EC%9E%91%EB%8F%99%EC%9B%90%EB%A6%AC/web-process%EC%A7%88%EB%AC%B8.png)

2. 설명

- ①② 사용자가 웹 브라우저를 통해 찾고 싶은 웹 페이지의 URL 주소를 입력함
- ③ 사용자가 입력한 URL 주소 중에서 도메인 네임(domain name) 부분을 DNS 서버에서 검색함
- ④ DNS 서버에서 해당 도메인 네임에 해당하는 IP 주소를 찾아 사용자가 입력한 URL 정보와 함께 전달함
- ⑤⑥ 웹 페이지 URL 정보와 전달받은 IP 주소는 HTTP 프로토콜을 사용하여 HTTP 요청 메시지를 생성함
- 생성된 HTTP 요청 메시지는 TCP 프로토콜을 사용하여 인터넷을 거쳐 해당 IP 주소의 컴퓨터로 전송됨
- ⑦ 도착한 HTTP 요청 메시지는 HTTP 프로토콜을 사용하여 웹 페이지 URL 정보로 변환됨
- ⑧ 웹 서버는 도착한 웹 페이지 URL 정보에 해당하는 데이터를 검색함
- ⑨⑩ 검색된 웹 페이지 데이터는 또 다시 HTTP 프로토콜을 사용하여 HTTP 응답 메시지를 생성함
- 생성된 HTTP 응답 메시지는 TCP 프로토콜을 사용하여 인터넷을 거쳐 원래 컴퓨터로 전송됨
- ⑪ 도착한 HTTP 응답 메시지는 HTTP 프로토콜을 사용하여 웹 페이지 데이터로 변환됨
- ⑫ 변환된 웹 페이지 데이터는 웹 브라우저에 의해 출력되어 사용자가 볼 수 있게 됨
